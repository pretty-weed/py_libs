[project]
name = "dandy_lib"
dynamic = ["version", "readme"]
description = "Libraries that Dandelion built"
requires-python = "~=3.13"
license = {file="LICENSE.md"}
authors = [{name="Dandelion Good", email = "dandeliongood@proton.me"}]

dependencies = [
    "pyyaml"
]

[project.optional-dependencies]
test = ["tox"]
pytest = [
    "pytest-cov",
    "pytest",
    "pytest-xdist"
]
lint = ["black"]
profile = ["snakeviz~=2.2"]
type = [
    "types-PyYAML",
    "mypy"
]


[tool.tox]
requires = ["tox~=4.28"]
extras = ["pytest"]
env_list = ["3.13", "3.13-type", "3.13-black", "3.14", "3.15", "3.15-type", "3.15-black"]

[gh-actions]
python = """
    3.13.8: "3.13", "3.13-type", "3.13-black"
    3.14.0: "3.14"
    3.15.0-alpha.1: "3.15", "3.15-type", "3.15-black" 
    """

[tool.tox.env_run_base]
description = "Run test under {base_python}"
extras = ["pytest"]
commands = [["pytest"]]

[tool.tox.env.type]
description = "run type check on code base"
extras = ["type"]
commands = [["mypy", "src/dandy_lib/testing.py", "src/dandy_lib/datatypes/numeric.py", "src/dandy_lib/datatypes/twodee.py"], ["mypy", "tests"]]


[tool.tox.env.lint]
description = "Run linting on code base"
extras = ["lint"]
commands = [["black", "src"], ["black", "tests"]]

[tool.setuptools.package-data]
dandy_lib = ["py.typed"]

[tool.setuptools.dynamic]
readme = {file = ["README.md"], content-type = "text/markdown"}

[tool.black]
line-length = 80

[build-system]
requires = ["setuptools>=80", "setuptools-scm[simple]>=8", "wheel"]
build-backend = "setuptools.build_meta"
